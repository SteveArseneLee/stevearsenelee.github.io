---
title:  "[Django] Django-회원가입 페이지 만들기"
excerpt: "회원가입 페이지"

categories:
  - Django
tags:
  - [Programming, python, Backend]

toc: true
toc_sticky: true
 
date: 2021-08-24
last_modified_at: 2021-08-24
---
## 회원가입 페이지 만들기
[Bootstrap](https://getbootstrap.com/docs/4.3/getting-started/introduction/)로 틀을 만들어 보겠다.

먼저 views.py로 가서 연결을 해준다.
```python
def register(request):
    return render(request, 'register.html')
```
로 위에서 생성한 register.html을 등록해준다.

프로젝트의 urls.py에 앱의 urls.py를 연결해주고
```python
from django.urls import path
from . import views
urlpatterns = [
    path('register/', views.register),
]
```
를 통해 해당 앱의 url들을 모아준다.

장고에선 꼭 써야하는 것이 있는데 **csrf_token**를 form 안에 써야한다. form은 데이터를 서버에 전달하는 것인데 크로스도메인을 막기 위해 암호화된 키를 숨기는 목적으로 위 코드를 쓴다.

view.py에서는
```python
def register(request):
    if request.method == 'GET':
        return render(request, 'register.html')
    elif request.method == 'POST':
        username = request.POST['username']
        password = request.POST['password']
        re_password = request.POST['re-password']
        
        fcuser = Fcuser(
            username = username,
            password = password
        )
        
        fcuser.save()
        
        return render(request, 'register.html')
```
로 만드는데 이때 method입력 방식에 따라 다르게 한다. 'POST'방식일 경우는 서버에 해당 정보를 저장하고, 'GET'방식일 경우에는 페이지를 출력한다.

views.py에서 password를 암호화하는 법 ```from django.contrib.auth.hashers import make_password```
로 암호화

models.py에서 모델을 변경하고 (ex> 이메일같은 새로운 속성 부여) ```python3 manage.py makemigrations```를 하면 옵션이 2가지가 뜬다.
1. Provide a one-off default now(will be set on all existing rows with a null value for this column)
2. Quit, and let me add a defulat in models.py

다음 중 1번을 택한다면 python창이 뜨고 거기에 기존 열에 넣을 값을 입력 

지금까지의 register.html

```html
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
    <link rel="stylesheet" href="/static/bootstrap.min.css" />
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="row mt-5">
            <div class="col-12 text-center">
                <h1>회원가입</h1>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-12">
                {{ error }}
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-12">
                <form method="POST" action=".">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="username">사용자 이름</label>
                        <input type="text" class="form-control" id="username" placeholder="사용자 이름" name="username">
                    </div>
                    <div class="form-group">
                        <label for="useremail">사용자 이메일</label>
                        <input type="email" class="form-control" id="useremail" placeholder="사용자 이메일" name="useremail">
                    </div>
                    <div class="form-group">
                        <label for="password">비밀번호</label>
                        <input type="password" class="form-control" id="password" placeholder="비밀번호" name="password">
                    </div>
                    <div class="form-group">
                        <label for="re-password">비밀번호 확인</label>
                        <input type="password" class="form-control" id="re-password" placeholder="비밀번호 확인" name="re-password">
                    </div>
                    <button type="submit" class="btn btn-primary">등록</button>
                </form>
            </div>
        </div>
    </div>
</body>

</html>
```
---
title:  "[Django] Django-게시판 만들기"
excerpt: "게시판"

categories:
  - Django
tags:
  - [Programming, python, Backend]

toc: true
toc_sticky: true
 
date: 2021-08-26
last_modified_at: 2021-08-26
---
### 게시판
이제 게시판을 만들어보도록 하겠다. 앞선 포스트의 **base.html**을 동일하게 가져오고, 이번엔 **board_list.html**을 생성한다.

#### url 연결
항상 기억해야하는 것이 url을 연결하는 것이다.
가장 바깥쪽에 있는 프로젝트의 **urls.py**에 들어가서 ```path('board/', include('fcuser.urls'))```로 연결한 후, **board앱**의 path에도 ```path('list/', views.board_list),```로 url을 연결해준다.
#### view 생성
당연하게 view도 만들어줘야하는데, 
```python
def board_list(request):
    return render(request, 'board_list.html')
```
로 만들어준다.

### Board의 Model
```python
class Board(models.Model):
    title = models.CharField(max_length=128, verbose_name='제목')
    contents = models.TextField(verbose_name='내용')
    writer = models.ForeignKey('fcuser.Fcuser', 
                               on_delete=models.CASCADE,verbose_name='작성자')
    register_dttm = models.DateTimeField(auto_now_add=True, verbose_name='등록시간')
    
    def __str__(self):
        return self.title
    
    class Meta:
        db_table = 'fastcampus_board'
        verbose_name = '게시글'
        verbose_name_plural = '게시글 목록'
```
```on_delete=models.CASCADE,```는 사용자가 탈퇴하면 그 탈퇴한 사용자가 쓴 모든 글들이 삭제된다.
또한 ```boards = Board.objects.all().order_by('-id')```로 view까지 작성하고 **board_list.html**까지 완료했다면 migration을 해야한다.

### 게시글 작성하는 공간 만들기
#### Board의 Form
**forms.py**
```python
class BoardForm(forms.Form):
    title = forms.CharField(
        error_messages={
            'required' : '제목을 입력해주세요.'
        },
        max_length=128, label="제목")
    contents = forms.CharField(
        error_messages= {
            'required':'내용을 입력해주세요.'  
        },
        widget=forms.Textarea, label="내용")
```
로 만들어준다.


``````

